<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="More constrained version of State that uses Boxed database with a lifetime."><title>StateDBBox in cast::revm::db::states - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-b0742ba02757f159.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="cast" data-themes="" data-resource-suffix="" data-rustdoc-version="1.84.0-nightly (e92993dbb 2024-10-18)" data-channel="nightly" data-search-js="search-e056c65ede92db13.js" data-settings-js="settings-805db61a62df4bd2.js" ><script src="../../../../static.files/storage-1d39b6787ed640ff.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../../static.files/main-f070b9041d14864c.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-0111fcff984fae8f.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc type"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../cast/index.html">cast</a><span class="version">0.2.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">StateDB<wbr>Box</a></h2><h3><a href="#aliased-type">Aliased type</a></h3><h3><a href="#fields">Fields</a></h3><ul class="block field"><li><a href="#structfield.block_hashes" title="block_hashes">block_hashes</a></li><li><a href="#structfield.bundle_state" title="bundle_state">bundle_state</a></li><li><a href="#structfield.cache" title="cache">cache</a></li><li><a href="#structfield.database" title="database">database</a></li><li><a href="#structfield.transition_state" title="transition_state">transition_state</a></li><li><a href="#structfield.use_preloaded_bundle" title="use_preloaded_bundle">use_preloaded_bundle</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="index.html">In cast::<wbr>revm::<wbr>db::<wbr>states</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../../../index.html">cast</a>::<wbr><a href="../../index.html">revm</a>::<wbr><a href="../index.html">db</a>::<wbr><a href="index.html">states</a></span><h1>Type Alias <span class="type">StateDBBox</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"></span></div><pre class="rust item-decl"><code>pub type StateDBBox&lt;'a, E&gt; = <a class="struct" href="../../struct.State.html" title="struct cast::revm::State">State</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="../../interpreter/primitives/db/trait.Database.html" title="trait cast::revm::interpreter::primitives::db::Database">Database</a>&lt;Error = E&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'a&gt;&gt;;</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>More constrained version of State that uses Boxed database with a lifetime.</p>
<p>This is used to make it easier to use State.</p>
</div></details><h2 id="aliased-type" class="section-header">Aliased Type<a href="#aliased-type" class="anchor">§</a></h2><pre class="rust item-decl"><code>struct StateDBBox&lt;'a, E&gt; {
    pub cache: <a class="struct" href="../../struct.CacheState.html" title="struct cast::revm::CacheState">CacheState</a>,
    pub database: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="../../interpreter/primitives/db/trait.Database.html" title="trait cast::revm::interpreter::primitives::db::Database">Database</a>&lt;Error = E&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'a&gt;,
    pub transition_state: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../struct.TransitionState.html" title="struct cast::revm::TransitionState">TransitionState</a>&gt;,
    pub bundle_state: <a class="struct" href="../struct.BundleState.html" title="struct cast::revm::db::BundleState">BundleState</a>,
    pub use_preloaded_bundle: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,
    pub block_hashes: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/collections/btree/map/struct.BTreeMap.html" title="struct alloc::collections::btree::map::BTreeMap">BTreeMap</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>, <a class="struct" href="../../interpreter/primitives/struct.FixedBytes.html" title="struct cast::revm::interpreter::primitives::FixedBytes">FixedBytes</a>&lt;32&gt;&gt;,
}</code></pre><h2 id="fields" class="fields section-header">Fields<a href="#fields" class="anchor">§</a></h2><span id="structfield.cache" class="structfield section-header"><a href="#structfield.cache" class="anchor field">§</a><code>cache: <a class="struct" href="../../struct.CacheState.html" title="struct cast::revm::CacheState">CacheState</a></code></span><div class="docblock"><p>Cached state contains both changed from evm execution and cached/loaded account/storages
from database. This allows us to have only one layer of cache where we can fetch data.
Additionally we can introduce some preloading of data from database.</p>
</div><span id="structfield.database" class="structfield section-header"><a href="#structfield.database" class="anchor field">§</a><code>database: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="../../interpreter/primitives/db/trait.Database.html" title="trait cast::revm::interpreter::primitives::db::Database">Database</a>&lt;Error = E&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'a&gt;</code></span><div class="docblock"><p>Optional database that we use to fetch data from. If database is not present, we will
return not existing account and storage.</p>
<p>Note: It is marked as Send so database can be shared between threads.</p>
</div><span id="structfield.transition_state" class="structfield section-header"><a href="#structfield.transition_state" class="anchor field">§</a><code>transition_state: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../struct.TransitionState.html" title="struct cast::revm::TransitionState">TransitionState</a>&gt;</code></span><div class="docblock"><p>Block state, it aggregates transactions transitions into one state.</p>
<p>Build reverts and state that gets applied to the state.</p>
</div><span id="structfield.bundle_state" class="structfield section-header"><a href="#structfield.bundle_state" class="anchor field">§</a><code>bundle_state: <a class="struct" href="../struct.BundleState.html" title="struct cast::revm::db::BundleState">BundleState</a></code></span><div class="docblock"><p>After block is finishes we merge those changes inside bundle.
Bundle is used to update database and create changesets.
Bundle state can be set on initialization if we want to use preloaded bundle.</p>
</div><span id="structfield.use_preloaded_bundle" class="structfield section-header"><a href="#structfield.use_preloaded_bundle" class="anchor field">§</a><code>use_preloaded_bundle: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code></span><div class="docblock"><p>Addition layer that is going to be used to fetched values before fetching values
from database.</p>
<p>Bundle is the main output of the state execution and this allows setting previous bundle
and using its values for execution.</p>
</div><span id="structfield.block_hashes" class="structfield section-header"><a href="#structfield.block_hashes" class="anchor field">§</a><code>block_hashes: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/collections/btree/map/struct.BTreeMap.html" title="struct alloc::collections::btree::map::BTreeMap">BTreeMap</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>, <a class="struct" href="../../interpreter/primitives/struct.FixedBytes.html" title="struct cast::revm::interpreter::primitives::FixedBytes">FixedBytes</a>&lt;32&gt;&gt;</code></span><div class="docblock"><p>If EVM asks for block hash we will first check if they are found here.
and then ask the database.</p>
<p>This map can be used to give different values for block hashes if in case
The fork block is different or some blocks are not saved inside database.</p>
</div><h2 id="layout" class="section-header">Layout<a href="#layout" class="anchor">§</a></h2><div class="docblock"><div class="warning"><p><strong>Note:</strong> Most layout information is <strong>completely unstable</strong> and may even differ between compilations. The only exception is types with certain <code>repr(...)</code> attributes. Please see the Rust Reference's <a href="https://doc.rust-lang.org/reference/type-layout.html">“Type Layout”</a> chapter for details on type layout guarantees.</p></div><p><strong>Size:</strong> 296 bytes</p></div><script src="../../../../type.impl/cast/revm/struct.State.js" data-self-path="cast::revm::StateDBBox" async></script></section></div></main></body></html>